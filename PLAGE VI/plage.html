<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plage astrale</title>
</head>
<body>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <script src="{PATH_TO_JS_FOLDER}/a-water.v0.1.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-sun-sky@3.0.3/dist/aframe-sun-sky.min.js"></script>

    <a-scene id="scene" light="defaultLightsEnabled: false;" renderer="antialias: true; sortObjects: true;">
      
        <!-- Ajouter les lumières par défaut -->
        <a-entity light="type: ambient; color: #BBB"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 0.6" position="-0.5 1 1"></a-entity>

         <!-- Ajouter la lune avec lumière en point -->
            <a-sphere src="#lunetext" id='lune' position='2000 2000 1000' scale="100 100 100 radius="1.25" color="#FFFF" shadow>
                <a-entity light="type : point; color : white; intensity : 0.5"></a-entity>
            </a-sphere>

           <!-- Ajouter le sons dans l'espace pour une immersion -->
            <a-sound src="ocean sound.mp3" autoplay="true" position="-300 150 0" volume="10"></a-sound>
            <a-sound src="ocean sound.mp3" autoplay="true" position="600 150 0" volume="10"></a-sound>
            <a-sound src="ocean sound.mp3" autoplay="true" position="200 150 300" volume="10"></a-sound>
    
      
 <a-assets>
        <a-asset-item id='plage' src="ile.glb"></a-asset-item>
        <a-asset-item id='rune jaune' src="Rune Stone prop.glb"></a-asset-item>
        <a-asset-item id='rune rouge' src="red rune.glb"></a-asset-item>
        <a-asset-item id='poulpe' src="Pulpo.glb"></a-asset-item>
        <audio id='ocean son' src="ocean sound.mp3"></audio> 
        <img id='lunetext' src="lune.jpg" alt="maTexture">
 </a-assets>  

        <a-entity gltf-model='#plage' position='200 -70 0'></a-entity>
        <a-entity gltf-model='#rune rouge' position='-150 140 0' scale="10 10 10" rotation="0 90 0" event-set__position="_target: #lune; _event: mouseenter; animation.property: position; animation.to: -300 900 0"></a-entity>
        <a-entity gltf-model='#rune jaune' position='160 110 350' scale="10 10 10" event-set__position="_target: #lune; _event: mouseenter; animation.property: position; animation.to: 160 800 800"></a-entity>
        <a-entity gltf-model='#rune jaune' position='160 110 350' scale="10 10 10"
        event-set__material="_target: #soleil; _event: mouseenter; animation.property: material; animation.to: side:back; sunPosition: 0 0 0"></a-entity>
        <a-entity gltf-model='#poulpe' position='900 80 700' scale="3000 3000 3000" event-set__position="_target: #lune; _event: mouseenter; animation.property: position; animation.to: 900 100 700"></a-entity>
        <a-entity id="plateforme" movement-controls="speed: 4;" position="0 150 0;">
          <a-camera camera="near: 0.1; far: 7000.0;" look-controls="pointerLockEnabled: true" wasd-controls="acceleration: 300" position="0 1.6 0">
              <!-- Impossible d'utiliser le curseur(et donc les animations) sans cacher l'océan  -->
              <!-- <a-cursor></a-cursor> -->
        </a-camera>
        </a-entity>

        <!-- A-sun-sky à défaut d'utiliser un a-sky qui bloque le champ de vision  -->
        <a-sun-sky id='soleil' material="side:back; sunPosition: 1 0 3.2" ></a-sun-sky>


    <!-- Ajouter le nouveau component ocean -->
        <a-ocean ocean-state="height_offset: 50; wind_velocity: 4 6; large_normal_map: 1 /assets/js_libraries/a_ocean/a_ocean_v_0_1_0/image-dir/a-water-assets/water-normal-1.png; small_normal_map: 0.5 /assets/js_libraries/a_ocean/a_ocean_v_0_1_0/image-dir/a-water-assets/water-normal-2.png">       
        </a-ocean>
      </a-scene>
      
</body>
</html>
    